/* Define CSS Variables */
:root {
    --primary-color: #F2E8CF;
    --secondary-color: #6A994E;
    --thirdary-color: #A7C957;
    --accent-color: #386641;
    --extra-accent-color: #5E7E8F;
    --dark-color: #B44749;
    --line-x: #E07A5F;
    --line-o: #3A86FF;
    
    --dark--primary-color: #1B1F1C;
    --dark--secondary-color: #86B071;
    --dark--thirdary-color: #BED98A;
    --dark--accent-color: #016172;
    --dark--extra-accent-color: #8DA7B5;
    --dark--dark-color: #D16B6D;
    --dark--line-x: #F28482;
    --dark--line-o: #6C8AE4;
}

body.dark-mode {
    --primary-color: var(--dark--primary-color);
    --secondary-color: var(--dark--secondary-color);
    --thirdary-color: var(--dark--thirdary-color);
    --accent-color: var(--dark--accent-color);
    --extra-accent-color: var(--dark--extra-accent-color);
    --dark-color: var(--dark--dark-color);
    --line-x: var(--dark--line-x);
    --line-o: var(--dark--line-o);
}


body {
    background-color: var(--primary-color);
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    transition: background-color 0.3s ease;
}
#game-grid, .grid-item, h1, #btn_reset {
    transition: all 0.3s ease;
}

.ghost-container {
    background-color: var(--accent-color);
    padding: 10px; /* MATCHES YOUR GRID PADDING EXACTLY */
    border-radius: 10px;
    position: absolute;
    z-index: 40; /* keep behind the grid so it can 'slide out from under' */
    display: flex;
    box-sizing: border-box; /* Crucial: padding is inside the width/height */
    pointer-events: none;
    opacity: 0; /* hidden until animation plays */
    will-change: transform, opacity;
}

.ghost-container .grid-item {
    width: 100%;
    height: 100%;
    box-sizing: border-box; /* Matches your real grid items */
    margin: 0;
    cursor: default;
}

/* slide-in keyframes + helper classes for 'emerging from under the board' */
.slide-in-left { animation: slide-in-left 320ms cubic-bezier(0,1.37,.68,.79) both; }
.slide-in-right { animation: slide-in-right 320ms cubic-bezier(0,1.37,.68,.79) both; }
.slide-in-top { animation: slide-in-top 320ms cubic-bezier(0,1.37,.68,.79) both; }
.slide-in-bottom { animation: slide-in-bottom 320ms cubic-bezier(0,1.37,.68,.79) both; }

.behind-grid { z-index: 40; }

@keyframes slide-in-left {
  /* start completely behind the grid */
  0%   { transform: translateX(300px);  opacity: .2; z-index: 0; }
  49%  { transform: translateX(200px);  opacity: .6; z-index: 0; }
  60%  { transform: translateX(120px);  opacity: .85; z-index: 60; }
  100% { transform: translateX(0);      opacity: 1;    z-index: 200; }
}
@keyframes slide-in-right {
  0%   { transform: translateX(-300px); opacity: 0.2; z-index: 0; }
  49%  { transform: translateX(-200px); opacity: .6; z-index: 0; }
  60%  { transform: translateX(-120px); opacity: .85; z-index: 60; }
  100% { transform: translateX(0);      opacity: 1;    z-index: 200; }
}
@keyframes slide-in-top { 
  0%   { transform: translateY(300px);  opacity: 0.2; z-index: 0; }
  49%  { transform: translateY(200px);  opacity: .6; z-index: 0; }
  60%  { transform: translateY(120px);  opacity: .85; z-index: 60; }
  100% { transform: translateY(0);      opacity: 1;    z-index: 200; }
}
@keyframes slide-in-bottom {
  0%   { transform: translateY(-300px); opacity: 0.2; z-index: 0; }
  49%  { transform: translateY(-200px); opacity: .6; z-index: 0; }
  60%  { transform: translateY(-120px); opacity: .85; z-index: 60; }
  100% { transform: translateY(0);      opacity: 1;    z-index: 200; }
}
/* Notes:
   - z-index is not smoothly animatable; setting it at 50% will jump the stacking order there.
   - You can use percentages for translate (e.g. translateX(100%)) if you want size-relative movement.
*/

/* Thin the inner border on the side touching the real grid */
.ghost-container.ghost-left .grid-item { border-right-width: 1px; }
.ghost-container.ghost-right .grid-item { border-left-width: 1px; }
.ghost-container.ghost-top .grid-item { border-bottom-width: 1px; }
.ghost-container.ghost-bottom .grid-item { border-top-width: 1px; }

#game-grid {
    position: relative;
    z-index: 100; /* sits above ghost elements so they can 'emerge from under' */
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 5px;
    width: 300px;
    height: 300px;
    margin: 20px auto;
    background-color: var(--accent-color);
    padding: 10px;
    border-radius: 10px;
}

.grid-item {
    background-color: var(--thirdary-color);
    border: 2px solid var(--secondary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    cursor: pointer;
    
}

.grid-item:hover {
    background-color: var(--secondary-color);
}

h1 {
    text-align: center;
    color: var(--dark-color);
    margin-top: 20px;
}

.button-container {
    flex-direction: column;
    text-align: center;
    margin-top: 20px;
    margin-bottom:  50px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    justify-content: center;
    flex-wrap: wrap;

}

#btn_reset,  #btn_Player1, #btn_AI {
    padding: 10px 20px;
    font-size: 1rem;
    cursor: pointer;

    border: none;
    border-radius: 10px;
    width: 150px;
}

#btn_Player1 {
    border: black solid 2px;
    background-color: var(--secondary-color);
    color: var(--dark-color);
}


#btn_reset, #btn_AI {
    border: red solid 2px;
    background-color: var(--accent-color);
    color: var(--dark-color);
}

#btn_reset:hover, #btn_AI:hover {
    background-color: var(--secondary-color);
}

#btn_AI.active {
    background-color: var(--line-o);
    border-color: #2b6bd6;
    color: white;
}

/* Hard-mode checkbox (styled) */
.hard-mode {
    display:inline-flex;
    align-items:center;
    gap:0.5rem;
    margin-left:0.6rem;
    transition: opacity .18s ease, transform .18s ease;
}
/* hide by default when Solo Mode isn't active (uses immediate sibling selector) */
#btn_AI:not(.active) + .hard-mode { display: none; }

.hard-mode input { width:18px; height:18px; cursor:pointer; accent-color: var(--line-o); }
.hard-mode span {
    display:inline-block;
    padding:6px 8px;
    border-radius:8px;
    border:2px solid var(--accent-color); /* theme color */
    background: transparent;
    color: var(--accent-color); /* theme color */
    font-size:0.85rem;
    cursor: pointer;
}
.hard-mode input:checked + span {
    background: var(--line-o); /* active highlight */
    color: white;
    border-color: var(--line-o);
}
.hard-mode input:focus + span { box-shadow: 0 0 0 3px rgba(0,0,0,0.06); }

.layout {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* winner / game-over overlay */
#winner-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.45);
    z-index: 2000; /* topmost */
}

#winner-overlay .winner-box {
    background: var(--primary-color);
    color: var(--dark-color);
    padding: 20px 28px;
    border-radius: 10px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.45);
    text-align: center;
    min-width: 220px;
}

#winner-overlay .winner-box h2 { margin: 0 0 12px; }
#winner-overlay .winner-box button { padding: 8px 14px; border-radius: 8px; border: none; cursor: pointer; background: var(--accent-color); color: white; }

/* helper to visually disable the grid when game over */
#game-grid.disabled-grid { pointer-events: none; filter: saturate(.9) brightness(.92); }
